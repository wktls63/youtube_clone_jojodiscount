<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
    <title>Video</title>
    <link rel="stylesheet" href="style/header.css">
    <link rel="stylesheet" href="style/general.css">
    <link rel="stylesheet" href="style/video_html.css">
    <link rel="stylesheet" href="style/video_comment.css">
</head>

<body>
    <header class="header">

        <div class="Yt-Button">
            <div class="Icon">
                <img class="hamburger" src="icon/hamburger.png" alt="">
            </div>
            <div class="logo">
                <img class="youtube-logo" onclick="newPage()" src="icon/Youtube-Logo.png" alt="">
                <div class="tooltip">YouTube Home</div>
            </div>
        </div>

        <div class="searchbox">
            <input class="search-bar" type="text" placeholder="Search">
            <button class="search-button">
                <img class="search-icon" src="icon/search.png" alt="">
                <div class="tooltip">Search</div>
            </button>
            <button class="voice-search-button">
                <img class="voice-search-icon" src="icon/mic.png" alt="">
                <div class="tooltip">Search with your voice</div>
            </button>
        </div>
        <div class="Profile">
            <div class="ProfileDetail">
                <img class="imgs" src="img/create.png" alt="">
                <div class="tooltip">Create</div>
            </div>
            <div class="ProfileDetail">
                <img class="imgs" src="img/apps.png" alt="">
                <div class="tooltip">Apps</div>
            </div>
            <div class="ProfileDetail">
                <img class="imgs" src="img/notifications.png" alt="">
                <div class="tooltip">Notifications</div>
            </div>
            <div class="ProfileImg">
                <img class="profileimg" src="img/Profile.png" alt="">
            </div>
        </div>

    </header>

    <!-- 영상 정보와 댓글 목록 -->

    <main class="Primary">

        <div class="VideoContainer">
            <div class="VideoPlayer">
                <div class="Youtube Player" id="Youtube-Player"></div>
                <!-- 여기에 비디오 플레이어 렌더 -->
                <div class="Video-Info">
                    <div class="Video-Info">
                        <div class="Title">Blind Woodturner: Turning passion into fine art</div>
                        <div class="Info">
                            <div class="Info-text">576,969 views . Oct 8, 2021</div>
                            <div class="Top-Level">
                                <!--좋아요 버튼-->
                                <div class="like">
                                    <button id="likeButton" class="liked" onclick="toggleLike()">
                                        <img class="liked" src="icon/liked.png" alt="">
                                    </button>
                                    <div id="likeCount" , class="Button-text">1000</div>
                                </div>
                                <!-- 싫어요 버튼-->
                                <div class="like">
                                    <button id="dislikeButton" class="liked" onclick="toggleDislike()">
                                        <img class="liked" src="icon/disliked.png" alt="">
                                    </button>
                                    <div id="dislikeCount" class="Button-text">632</div>
                                </div>
                                <div class="like">
                                    <img class="liked" src="icon/share.png" alt="">
                                    <div class="Button-text">SHARE</div>
                                </div>
                                <div class="like">
                                    <img class="liked" src="icon/save.png" alt="">
                                    <div class="Button-text">SAVE</div>
                                </div>
                                <div class="like">
                                    <img class="liked" src="icon/more.png" alt="">
                                    <div class="Button-text"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr id="border">
                </div>
            </div>
            <div class="Video-Desc">
                <div class="Video-Desc">
                    <div class="Channel-Title">
                        <img class="Pic" src="icon/marcus.png" alt="">
                        <div class="Profile-Name">
                            <div class="Name">Marcus Levin</div>
                            <div class="Subscribe-People">1.2M subscribers</div>
                        </div>
                        <button id="Subscribes-Btn" class="Subscribes-Btn" onclick="toggleSubscription()"
                            onclick="handleClick()">SUBSCRIBES
                        </button>
                    </div>
                    <div class="Channel-Info">
                        Chris Fisher, also known as the Blind Woodturner, learned his craft by listening to
                        hundreds of hoursof YouTube videos and experimenting in his workshop. Now he`s a YouTube creator
                        himself, sells
                        his products worldwide, and does demonstrations all around the country.
                    </div>
                    <div class="Btn">SHOW MORE</div>
                    <hr id="border">
                </div>
            </div>
        </div>

        <!-- 코멘트 -->
        <div class="Comment">
            <div class="Short-By">
                <div class="Count">286 Comments</div>
                <div class="Comment-Icon">
                    <img src="svg/Dropdown.svg" alt="정렬">
                </div>
                <div class="Short-by">SORT BY</div>
            </div>

            <div class="Comment-Content">
                <div class="Profile-pic"></div>
                <div class="User-Avatar">
                    <img src="img/Profile.png" alt="comment-user-avatar">
                </div>
                <div class="comments-container">
                    <form id="comment-form">
                        <input type="text" class="Comment-input" placeholder="Add a public comment...."
                            onkeypress="handleKeyPress(event)" autocomplete="off">
                    </form>
                    <button class="Comment-Cancel" onclick="CancelComment()">Delete</button>
                    <button class="Comment-Add">Write</button>
                    <ul id="comments-list"></ul>
                </div>
            </div>

            <div class="Comments">
                <!--여기에 추가 댓글들 -->
            </div>
    </main>


    <!-- 사이드 영상 목록 -->
    <aside class="Secondary">

        <div class="Content">

            <div class="Right-Top-Menu">

                <div class="Top-Menu-Item">
                    <div class="Button">All</div>
                </div>
                <div class="Top-Menu-Item">
                    <div class="Button">From Marcus Levin</div>
                </div>
            </div>

            <!-- 동영상 목록 -->
            <div class="main-video">
                <section class="video-grid" id="video-grid">
                    <div class="video-preview" id="video-preview">
                        <!-- 이곳에 videoRender.js -->
                    </div>
                </section>
            </div>

    </aside>


</body>
<script src="js/location.js"></script>
<script src="js/video_comment.js"></script>
<script src="js/videoHtmlVideoRender.js"></script>

<script>
    // HTML 파싱된 후 videoPlyerRender() 함수를 실행하는 DOMContentLoaded 이벤트 핸들러를 등록
    document.addEventListener('DOMContentLoaded', () => {
        let url = window.location.search;
        console.log(url)
        let regex = /[^0-9]/g;
        let result = url.replace(regex, "")
        let id = parseInt(result);

        videoPlyerRender(id).catch(error => {
            console.error('에러:', error);
        })
    });
</script>
<script>
    // HTML 파싱된 후 displayVideoList() 함수를 실행하는 DOMContentLoaded 이벤트 핸들러를 등록
    document.addEventListener('DOMContentLoaded', () => {
        let url = window.location.search;

        displayVideoList().catch(error => {
            console.error('에러:', error);
        }) // 처음에는 모든 비디오를 표시
    });
</script>
<script src="js/like.js"></script>
<script src="js/subscription.js"></script>

</html>